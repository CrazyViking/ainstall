#!/bin/bash

#check network
ping archlinux.org -c 4

#prelim setup
loadkeys "us"
timedatectl set-ntp true

clear

#partitioning
lsblk
echo "Enter drive to partition (ex: sda, sdb, or sdc):"
read drivePath
echo "Now partitioning $drivePath\:"
echo "Press enter to run cfdisk:"
cfdisk /dev/$drivePath

clear

echo "Which partition are you installing arch onto? (ex: sda1, sda3, or sdb2)"
read fullPath
echo "Which filesystem should $fullPath be formatted as? (ex: ext3, ext4, brtrfs, or xfs)"
read fSystem
mkfs.$fSystem /dev/$fullPath

echo "Mounting $fullPath"
mount /dev/$fullPath /mnt

lsblk
cd /
ls

while [$dir != no]
  do echo "Are there any additional directories to mount to its own partition? (If so type the directory name, if not write no.)"
     read dir
     echo "What partition should $dir be mounted to?"
     read partition
     mount /$dir /dev/$partition
done

clear

echo "Installing base and base-devel"
pacstrap /mnt base base-devel

echo "Generating fstab:"
genfstab -U -p /mnt >> /mnt/etc/fstab

clear

echo "Chrooting into installation:"
echo "Run aconfig inside the chroot environment to finish installation."

cp ainstall /mnt
cp aconfig /mnt

sleep 1s
arch-chroot /mnt
